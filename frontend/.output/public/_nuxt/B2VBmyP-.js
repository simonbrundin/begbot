import{D as F,K as M,c as p,a as t,F as h,G as D,z as s,t as o,P as L,L as d,O as r,H as S,s as u,o as c,I as U}from"./DJ5wksKX.js";import{u as N}from"./dQMjavNy.js";import"./DU5dWS6F.js";const P={class:"flex justify-between items-center mb-6"},$={class:"card overflow-hidden"},j={class:"table"},A={class:"font-medium text-slate-100"},B=["onClick"],z={class:"text-sm text-slate-400"},E=["onClick"],K={key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},G={class:"bg-slate-800 rounded-lg p-6 w-full max-w-lg border border-slate-700"},R={class:"text-xl font-bold text-slate-100 mb-4"},H={class:"grid grid-cols-2 gap-4"},I={class:"flex justify-end gap-2 pt-4"},J={type:"submit",class:"btn btn-primary"},W=F({__name:"products",setup(O){const b=N(),v=u([]),y=u(!1),m=u(!1),i=u(null),f={brand:"",name:"",category:"",model_variant:"",sell_packaging_cost:0,sell_postage_cost:0,enabled:!1},n=u({...f}),g=async()=>{y.value=!0;try{v.value=await b.get("/products")}catch(a){console.error("Failed to fetch products:",a)}finally{y.value=!1}},k=a=>new Date(a).toLocaleDateString("sv-SE"),x=a=>{i.value=a,n.value={brand:a.brand||"",name:a.name||"",category:a.category||"",model_variant:a.model_variant||"",sell_packaging_cost:a.sell_packaging_cost,sell_postage_cost:a.sell_postage_cost,enabled:a.enabled}},_=()=>{m.value=!1,i.value=null,n.value={...f}},w=async()=>{try{i.value?await b.put(`/products/${i.value.id}`,n.value):await b.post("/products",n.value),_(),await g()}catch(a){console.error("Failed to save product:",a)}},C=async a=>{try{await b.put(`/products/${a.id}`,{...a,enabled:!a.enabled}),await g()}catch(e){console.error("Failed to toggle enabled:",e)}};return M(g),(a,e)=>(c(),p("div",null,[t("div",P,[e[7]||(e[7]=t("h1",{class:"page-header"},"Produkter",-1)),t("button",{onClick:e[0]||(e[0]=l=>m.value=!0),class:"btn btn-primary"}," Lägg till produkt ")]),t("div",$,[t("table",j,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"Märke"),t("th",null,"Namn"),t("th",null,"Kategori"),t("th",null,"Variant"),t("th",null,"Aktiverad"),t("th",null,"Skapad"),t("th")])],-1)),t("tbody",null,[(c(!0),p(h,null,D(s(v),l=>(c(),p("tr",{key:l.id},[t("td",A,o(l.brand||"-"),1),t("td",null,o(l.name||"-"),1),t("td",null,o(l.category||"-"),1),t("td",null,o(l.model_variant||"-"),1),t("td",null,[t("button",{onClick:V=>C(l),class:U(l.enabled?"badge badge-success":"badge")},o(l.enabled?"Ja":"Nej"),11,B)]),t("td",z,o(k(l.created_at)),1),t("td",null,[t("button",{onClick:V=>x(l),class:"text-primary-400 hover:text-primary-300"}," Redigera ",8,E)])]))),128))])])]),s(m)||s(i)?(c(),p("div",K,[t("div",G,[t("h2",R,o(s(i)?"Redigera produkt":"Lägg till ny produkt"),1),t("form",{onSubmit:L(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[9]||(e[9]=t("label",{class:"label"},"Märke",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s(n).brand=l),type:"text",class:"input"},null,512),[[r,s(n).brand]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"label"},"Namn",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s(n).name=l),type:"text",class:"input"},null,512),[[r,s(n).name]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"label"},"Kategori",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(n).category=l),type:"text",class:"input",placeholder:"t.ex., telefon"},null,512),[[r,s(n).category]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"label"},"Modellvariant",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s(n).model_variant=l),type:"text",class:"input",placeholder:"t.ex., 256GB"},null,512),[[r,s(n).model_variant]])]),t("div",H,[t("div",null,[e[13]||(e[13]=t("label",{class:"label"},"Förpackning (öre)",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s(n).sell_packaging_cost=l),type:"number",class:"input"},null,512),[[r,s(n).sell_packaging_cost,void 0,{number:!0}]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Frakt (öre)",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s(n).sell_postage_cost=l),type:"number",class:"input"},null,512),[[r,s(n).sell_postage_cost,void 0,{number:!0}]])])]),t("div",I,[t("button",{type:"button",onClick:_,class:"btn btn-secondary"}," Avbryt "),t("button",J,o(s(i)?"Spara":"Lägg till"),1)])],32)])])):S("",!0)]))}});export{W as default};
